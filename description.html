<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- –®—Ä–∏—Ñ—Ç—ã Google -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
<!-- –ò–∫–æ–Ω–∫–∏ Font Awesome 6 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  :root {
    --bg-color: #f0f2f5;
    --text-color: #222;
    --section-bg: #fff;
    --border-color: #d0d0d0;
    --primary-gradient: linear-gradient(135deg, #4CAF50, #66bb6a);
    --hover-gradient: linear-gradient(135deg, #45a049, #5fa362);
    --shadow: rgba(0,0,0,0.1);
    --btn-bg: #4CAF50;
    --btn-hover-bg: #45a049;
  }

  body {
    font-family: 'Montserrat', sans-serif;
    margin: 0;
    padding: 30px;
    background: var(--bg-color);
    color: var(--text-color);
    transition: background 0.5s, color 0.5s;
    line-height: 1.6;
  }

  /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
  body.dark-theme {
    --bg-color: #222;
    --text-color: #eee;
    --section-bg: #333;
    --border-color: #555;
    --primary-gradient: linear-gradient(135deg, #66bb6a, #4CAF50);
    --hover-gradient: linear-gradient(135deg, #5fa362, #45a049);
    --shadow: rgba(0,0,0,0.3);
    --btn-bg: #66bb6a;
    --btn-hover-bg: #5fa362;
  }
  #footer {
  position: fixed;
  bottom: 10px;
  width: 100%;
  text-align: center;
  font-family: 'Arial', sans-serif;
  font-size: 14px;
  color: var(--text-color);
  padding: 12px 20px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  border-radius: 16px 16px 0 0;
  backdrop-filter: blur(4px);
  transition: all 0.3s ease;
  cursor: default;
}

#footer span {
  display: inline-block;
  font-weight: 600;
  letter-spacing: 0.5px;
}
  h2 {
    text-align: center;
    font-size: 40px;
    font-weight: 700;
    margin-bottom: 50px;
    color: var(--text-color);
    text-shadow: 1px 1px 4px rgba(0,0,0,0.1);
  }
 /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" */
  .back-btn {
    display: inline-block;
    margin-top: 50px;
    padding: 15px 20px;
    font-size: 1.2em;
    font-weight: 600;
    color: #fff;
    background-color: #ff5722; /* —è—Ä–∫–∏–π —Ü–≤–µ—Ç –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: background-color 0.3s, transform 0.2s;
  }
  .back-btn:hover {
    background-color: #e64a19; /* —á—É—Ç—å —Ç–µ–º–Ω–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: translateY(-2px);
  }
  /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
  .theme-switcher {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 999;
    font-size: 14px;
    background: var(--section-bg);
    padding: 8px 12px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  .theme-switcher input[type="checkbox"] {
    width: 50px;
    height: 25px;
    appearance: none;
    background: #c6c6c6;
    outline: none;
    border-radius: 25px;
    position: relative;
    transition: background 0.3s;
    cursor: pointer;
  }
  .theme-switcher input[type="checkbox"]:checked {
    background: #66bb6a;
  }
  .theme-switcher input[type="checkbox"]::before {
    content: "";
    position: absolute;
    top: 2px;
    left: 2px;
    width: 21px;
    height: 21px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: 0.3s;
  }
  input[type="checkbox"]:checked::before {
    transform: translateX(25px);
  }

  /* –û–±—â–∏–π —Å—Ç–∏–ª—å —Å–µ–∫—Ü–∏–π */
  .section1 {
    background: var(--section-bg);
    border-radius: 20px;
    padding: 30px;
    margin-top: 40px;
    box-shadow: 0 16px 32px var(--shadow);
    transition: box-shadow 0.3s, transform 0.3s, background 0.3s;
  }
  .section1:hover {
    box-shadow: 0 20px 40px var(--shadow);
    transform: translateY(-4px);
  }

  /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü–∏–π */
  .section1 h3 {
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 22px;
    font-weight: 600;
    color: var(--text-color);
    display: flex;
    align-items: center;
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 8px;
  }
  .section1 h3 i {
    margin-right: 12px;
    font-size: 24px;
    transition: color 0.3s;
    color: #4CAF50;
  }
  .section1 h3:hover i {
    color: #388E3C;
  }

  /* –ú–µ—Ç–∫–∏ –∏ –ø–æ–ª—è */
  label {
    display: block;
    margin-bottom: 15px;
    font-weight: 500;
  }
  input[type="text"], select, textarea {
    width: 100%;
    padding: 14px 20px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    font-size: 16px;
    transition: border-color 0.3s, box-shadow 0.3s, transform 0.2s;
  }
  input[type="text"]:focus, select:focus, textarea:focus {
    border-color: #4CAF50;
    box-shadow: 0 0 12px rgba(76, 175, 80, 0.2);
    outline: none;
    transform: scale(1.02);
  }

  /* –ö–Ω–æ–ø–∫–∏ */
button {
    padding: 14px 30px;
    font-size: 17px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: var(--primary-gradient);
    color: #fff;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    font-weight: 600;
  }
button i {
    margin-right: 12px;
    font-size: 20px;
    transition: transform 0.3s;
}
button:hover {
    background: var(--hover-gradient);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
}
button:hover i {
    transform: rotate(10deg);
}

/* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
#saveBtn {
    display: inline-block;
    margin-top: 25px;
    padding: 14px 40px;
}

/* –¢–∞–±–ª–∏—Ü–∞ */
#tableContainer {
    margin-top: 50px;
}
table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    background: #fff;
    transition: background 0.3s, box-shadow 0.3s;
}
body.dark-theme table {
    background: #444;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5);
}
thead {
    background: linear-gradient(135deg, #f7f7f7, #e0e0e0);
    transition: background 0.3s;
}
body.dark-theme thead {
    background: linear-gradient(135deg, #555, #333);
}
th {
    padding: 16px 20px;
    font-weight: 600;
    font-size: 17px;
    text-align: center;
    border-bottom: 2px solid var(--border-color);
    color: var(--text-color);
}
td {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    font-size: 16px;
    transition: background-color 0.2s, transform 0.2s, color 0.3s;
    background-color: transparent;
    color: inherit;
}
td.editable {
    background-color: #fff8dc;
    cursor: text;
}
body.dark-theme td.editable {
    background-color: #777;
}
td:hover {
    background-color: #f0f0f0;
}
body.dark-theme td:hover {
    background-color: #666;
}

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
#notification {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #4CAF50;
  color: #fff;
  padding: 15px 25px;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  font-size: 16px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease, transform 0.4s ease;
  z-index: 1000;
}
#notification.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0);
}

/* –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±–ª–æ–∫–∞ —Å–ª–µ–≤–∞ —Å –∫—Ä–∞—Å–∏–≤—ã–º —Å—Ç–∏–ª–µ–º */
#changelogContainer {
  display: none; /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç */
  position: fixed; top: 70px; left: 20px; /* —Å–ª–µ–≤–∞ */
  width: 420px;
  max-height: 500px;
  overflow-y: auto;
  background: var(--bg-color);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  z-index: 9999;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  color: var(--text-color);
  transition: opacity 0.3s, transform 0.3s;
}
#changelogContainer.show {
  display: block;
  opacity: 1;
  transform: translateY(0);
}
#changelogContainer h4 {
  margin-top: 0;
  font-size: 18px;
  margin-bottom: 15px;
  font-weight: 600;
  border-bottom: 2px solid #ddd;
  padding-bottom: 8px;
  color: var(--text-color);
}

/* –°—Ç–∏–ª—å –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ */
.changelog-entry {
  margin-bottom: 10px;
  padding: 12px 15px;
  background-color: var(--section-bg);
  border-radius: 8px;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
  transition: background 0.2s, transform 0.2s;
}
.changelog-entry:hover {
  background-color: var(--section-bg);
  transform: translateY(-2px);
}

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø–∏—Å–∏ */
.changelog-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.changelog-version {
  font-weight: 600;
  font-size: 15px;
  color: var(--text-color);
}
.changelog-date {
  font-size: 13px;
  color: #7f8c8d;
}
.changelog-type {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  color: #fff;
  background-color: #3498db;
}
#bugReportBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--section-bg);
  color: var(--text-color);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  padding: 0; /* —É–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
}

/* –ú–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å font-size —É –∫–Ω–æ–ø–∫–∏, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —É –∏–∫–æ–Ω–∫–∏ */
#bugReportBtn i {
  display: block;
  margin: 0;
}
/* –¶–≤–µ—Ç –¥–ª—è —Ç–∏–ø–æ–≤ */
.changelog-type.–î–æ–±–∞–≤–ª–µ–Ω–æ { background-color: #27ae60; }
.changelog-type.–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ { background-color: #f39c12; }
.changelog-type.–û–±—â–µ–µ { background-color: #8e44ad; }
.bug-modal-hidden {
  display: none !important;
}

.bug-modal-enter {
  opacity: 0;
  transform: translateY(-20px);
}

.bug-modal-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s ease-out;
}


.bug-modal-exit {
  opacity: 1;
  transform: translateY(0);
}

.bug-modal-exit-active {
  opacity: 0;
  transform: translateY(-20px);
  transition: all 0.3s ease-in;
}
/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏–Ω–Ω–µ—Ä–∞ ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞ */
.spinner {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—Ä—É–≥ ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è ¬´–∫—Ä—É—Ç–∏–ª–∫–∞¬ª */
.spinner-inner {
  width: 40px;
  height: 40px;
  border: 4px solid transparent;
  border-top: 4px solid var(--btn-bg);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
/* –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
/* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞: —Ü–≤–µ—Ç —Å–ø–∏–Ω–Ω–µ—Ä–∞ */
body.dark-theme .spinner-inner {
  border-top-color: var(--btn-hover-bg);
}
</style>
</head>
<body>
  <!-- –ù–æ–≤—ã–π —Ñ—É—Ç–µ—Ä -->
<div id="footer">
  <span>–°–æ–∑–¥–∞—Ç–µ–ª—å —Å–∞–π—Ç–∞: EmPsOn &copy; 2025</span>
</div>
<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
<div id="notification"></div>
<div style="margin-bottom:20px;">
  <button class="back-btn" onclick="window.open('index.html', '_self')">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
</div>
<!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
<div class="custom-theme-switcher" style="top: 20px; right: 20px;">
  <div id="custom-theme-toggle" style="width: 60px; height: 35px; background: #FFA500; border-radius: 25px; cursor: pointer; display: flex; align-items: center; padding: 0 5px; transition: background 0.5s; position: fixed; top: 20px; right: 20px; z-index: 999;">
    <div class="icon-moon" style="position: absolute; left: 6px; font-size: 18px;">üåô</div>
    <div class="icon-sun" style="position: absolute; right: 6px; font-size: 18px;">‚òÄÔ∏è</div>
    <div class="knob" style="position: absolute; top: 3px; width: 30px; height: 30px; background: white; border-radius: 50%; box-shadow: 0 0 5px rgba(0,0,0,0.3); transition: all 0.5s ease; left: 5px;"></div>
  </div>
</div>

<!-- –ë–ª–æ–∫ changelog -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 9999;">
  <button id="changelogToggle" style="padding:10px 15px; border:none; border-radius:8px; background:var(--primary-gradient); color:#fff; cursor:pointer; font-weight:600; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: background 0.3s;">
    Changelog
  </button>
</div>
<div id="changelogContainer">
  <h4 style="margin-top:0;">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h4>
  <textarea id="changelogText" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π..."></textarea>
  <button id="saveChangelog"><i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<!-- –í—ã–±–æ—Ä –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã -->
<div class="section1">
  <h3><i class="fas fa-columns"></i>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã</h3>
  <label>
    <strong>–ö–æ–ª–æ–Ω–∫–∞:</strong>
    <select id="columnSelect" style="width:100%; padding:14px; border-radius:12px; border:1px solid var(--border-color); font-size:16px;">
      <option value="15">Details</option>
      <option value="16">Description</option>
    </select>
  </label>
</div>

<!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
<div class="section1">
  <h3><i class="fas fa-upload"></i>–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª</h3>
  <input type="file" id="fileInput" accept=".csv" style="width:98%; padding:14px; border-radius:12px; border:1px solid var(--border-color); font-size:16px; cursor:pointer; box-shadow: inset 0 0 5px rgba(0,0,0,0.1);" />
</div>

<!-- –†–µ–∂–∏–º –∑–∞–º–µ–Ω—ã -->
<div class="section1">
  <h3><i class="fas fa-sync-alt"></i>–†–µ–∂–∏–º –∑–∞–º–µ–Ω—ã</h3>
  <label>
    <strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</strong>
    <select id="modeSelect" style="width:100%; padding:14px; border-radius:12px; border:1px solid var(--border-color); font-size:16px;">
      <option value="html">–ó–∞–º–µ–Ω–∏—Ç—å HTML</option>
      <option value="text">–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç</option>
    </select>
  </label>
  <label>
    <strong>–ò—Å–∫–æ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</strong>
    <input type="text" id="searchHtml" placeholder="–í–≤–µ–¥–∏—Ç–µ HTML –∏–ª–∏ —Ç–µ–∫—Å—Ç" />
  </label>
  <label>
    <strong>–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</strong>
    <input type="text" id="replaceHtml" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ HTML –∏–ª–∏ —Ç–µ–∫—Å—Ç" />
  </label>
  <div style="text-align:center; margin-top:10px;">
    <button id="replaceBtn" style="padding:14px 20px; font-size:16px;"><i class="fas fa-sync-alt"></i> –ó–∞–º–µ–Ω–∏—Ç—å</button>
  </div>
</div>

<!-- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥–∞–º 1–° -->
<div class="section1">
  <h3><i class="fas fa-search"></i>–ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥–∞–º 1–°</h3>
  <label>
    <strong>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥—ã 1–° (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ –ø—Ä–æ–±–µ–ª):</strong>
    <input type="text" id="codesSearch" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 001, 123 456" />
  </label>
  <div style="text-align:center; margin-top:10px;">
    <button id="searchCodesBtn" style="padding:14px 20px; font-size:16px;"><i class="fas fa-search"></i> –ò—Å–∫–∞—Ç—å –ø–æ –∫–æ–¥–∞–º 1–°</button>
  </div>
</div>

<!-- –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö -->
<div class="section1">
  <h3><i class="fas fa-plus-circle"></i>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç/html</h3>
  <label>
    <strong>–ß—Ç–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å:</strong>
    <input type="text" id="insertText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" />
  </label>
  <label>
    <strong>–¢–∏–ø –≤—Å—Ç–∞–≤–ª—è–µ–º–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:</strong>
    <select id="insertType" style="width:100%; padding:14px; border-radius:12px; border:1px solid var(--border-color); font-size:16px;">
      <option value="text">–¢–µ–∫—Å—Ç</option>
      <option value="html">HTML</option>
    </select>
  </label>
  <label>
    <strong>–í—Å—Ç–∞–≤–ª—è—Ç—å:</strong>
    <select id="insertPosition" style="width:100%; padding:14px; border-radius:12px; border:1px solid var(--border-color); font-size:16px;">
      <option value="start">–í –Ω–∞—á–∞–ª–æ</option>
      <option value="end">–í –∫–æ–Ω–µ—Ü</option>
    </select>
  </label>
  <div style="text-align:center; margin-top:10px;">
    <button id="insertBtn" style="padding:14px 20px; font-size:16px;"><i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å</button>
  </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
<div style="margin-top:50px; text-align:center;">
  <button id="saveBtn" style="padding:14px 20px; font-size:16px;"><i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ -->
<div id="tableContainer"></div>

<!-- –ö–Ω–æ–ø–∫–∞ –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç–∞ -->
<div style="position: fixed; bottom: 70px; right: 10px; z-index: 9999;">
  <button id="bugReportBtn" style="
    background:#f44336; 
    color:#fff; 
    border:none; 
    border-radius:50%; 
    width:50px; 
    height:50px; 
    cursor:pointer; 
    box-shadow:0 4px 8px rgba(0,0,0,0.2); 
    display: flex; 
    align-items: center; 
    justify-content: center;
    padding: 0;
  ">
    <i class="fas fa-bug" style="font-size:24px; display: block; line-height: 1; text-align: center;"></i>
  </button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –±–∞–≥–∞ -->
<div id="bugModal" class="bug-modal-hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:10000;">
  <div style="background: var(--section-bg); padding:20px; border-radius:8px; max-width:500px; width:90%; position:relative;">
    <h3>–°–æ–æ–±—â–∏—Ç—å –æ –±–∞–≥–µ</h3>
    <textarea id="bugDescription" style="width:99%; height:150px; padding:10px; border-radius:6px; border:1px solid #ccc; color: var(--text-color); background: var(--section-bg);" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..."></textarea>
    <div style="margin-top:10px; display:flex; justify-content:flex-end;">
      <button id="sendBug" style="background:#4CAF50; color:#fff; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; margin-right:10px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      <button id="closeBugModal" style="background:#ccc; color:#000; border:none; padding:10px 20px; border-radius:6px; cursor:pointer;">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<script src="https://unpkg.com/papaparse@5.3.0/papaparse.min.js"></script>
<script>
let csvData = [];
let headers = [];
let selectedColumnIndex = 15; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 16-–π —Å—Ç–æ–ª–±–µ—Ü
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä
function showLoader() {
  document.getElementById('loader').style.display = 'flex';
}

// –°–∫—Ä—ã–≤–∞—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä
function hideLoader() {
  document.getElementById('loader').style.display = 'none';
}
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞
document.getElementById('columnSelect').addEventListener('change', (e) => {
  selectedColumnIndex = parseInt(e.target.value);
  renderTable();
});

// –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
const customToggle = document.getElementById('custom-theme-toggle');
const knob = customToggle.querySelector('.knob');

customToggle.addEventListener('click', () => {
  document.body.classList.toggle('dark-theme');

  if (document.body.classList.contains('dark-theme')) {
    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –±–µ–≥—É–Ω–æ–∫ –≤–ø—Ä–∞–≤–æ
    knob.style.transform = 'translateX(30px)';
    // –ú–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å, –µ—Å–ª–∏ –µ—Å—Ç—å
  } else {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–µ–≥—É–Ω–æ–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
    knob.style.transform = 'translateX(0)';
  }
});

// –î–ª—è —Å–º–µ–Ω—ã —Ü–≤–µ—Ç–∞ —Ñ–æ–Ω–∞ –ø–æ–ª–∑—É–Ω–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã
const toggleDiv = document.getElementById('custom-theme-toggle');

const observer = new MutationObserver(() => {
  if (document.body.classList.contains('dark-theme')) {
    toggleDiv.style.background = '#555'; // –¥–µ–ª–∞–µ–º —Ñ–æ–Ω —Ç—ë–º–Ω—ã–º
  } else {
    toggleDiv.style.background = '#FFA500'; // —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω
  }
});
observer.observe(document.body, { attributes: true, className: true });
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message) {
  const notif = document.getElementById('notification');
  notif.innerText = message;
  notif.classList.add('show');
  setTimeout(() => {
    notif.classList.remove('show');
  }, 3000);
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
document.getElementById('fileInput').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    showLoader(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä
    Papa.parse(file, {
      header: false,
      skipEmptyLines: true,
      delimiter: ';',
    
complete: function(results) {
  const rawHeaders = results.data[0]; // –ò—Å—Ö–æ–¥–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
  const priorityPromoIndex = rawHeaders.indexOf('PriorityPromo');

  // –§–æ—Ä–º–∏—Ä—É–µ–º –æ—á–∏—â–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–±–µ–∑ PriorityPromo)
  headers = rawHeaders.filter((_, idx) => idx !== priorityPromoIndex);

  csvData = results.data.slice(1).map(row => {
    const obj = {};
    headers.forEach(header => {
      // –ù–∞—Ö–æ–¥–∏–º –∏—Å—Ö–æ–¥–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≤ rawHeaders
      const originalIndex = rawHeaders.indexOf(header);
      // –ë–µ—Ä—ë–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å—Ç—Ä–æ–∫–∏ –ø–æ —ç—Ç–æ–º—É –∏–Ω–¥–µ–∫—Å—É
      obj[header] = row[originalIndex] || '';
    });
    obj._visible = true;
    return obj;
  });
  renderTable();
 showNotification(`–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω`);
  hideLoader(); // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞
},
      error: function(err) {
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–∞–π–ª–∞: ' + err.message);
        hideLoader(); // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ
      }
    });
  }
});

function renderTable() {
  const container = document.getElementById('tableContainer');
  container.innerHTML = '';

  const table = document.createElement('table');

  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');

  // –ó–∞–≥–æ–ª–æ–≤–∫–∏
  const thSelected = document.createElement('th');
  thSelected.innerText = headers[selectedColumnIndex];
  headerRow.appendChild(thSelected);

  const thItemID = document.createElement('th');
  thItemID.innerText = 'ItemID';
  headerRow.appendChild(thItemID);

  thead.appendChild(headerRow);
  table.appendChild(thead);

  const tbody = document.createElement('tbody');
  csvData.forEach(row => {
    if (row._visible === false) return;
    const tr = document.createElement('tr');

    // –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü
    const tdSelected = document.createElement('td');
    const colName = headers[selectedColumnIndex];

    if (selectedColumnIndex === 15 || selectedColumnIndex === 16) {
      tdSelected.classList.add('editable');
      tdSelected.contentEditable = true;
      tdSelected.innerHTML = row[colName] || '';
      tdSelected.addEventListener('blur', () => {
        row[colName] = tdSelected.innerHTML;
      });
    } else if (selectedColumnIndex === 11) {
      tdSelected.innerText = row[colName] || '';
    }
    tr.appendChild(tdSelected);

    // ItemID
    const tdItemID = document.createElement('td');
    tdItemID.innerText = row['ItemID'] || '';
    tr.appendChild(tdItemID);

    tbody.appendChild(tr);
  });
  table.appendChild(tbody);
  container.appendChild(table);
}

document.getElementById('replaceBtn').addEventListener('click', () => {
  const mode = document.getElementById('modeSelect').value;
  const searchVal = document.getElementById('searchHtml').value;
  const replaceVal = document.getElementById('replaceHtml').value;

  if (!headers.length || !csvData.length) {
    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª.');
    return;
  }
  if (searchVal.trim() === '') {
    alert('–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞.');
    return;
  }

  let count = 0;
  function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  }
  const regex = new RegExp(escapeRegExp(searchVal), 'g');

  csvData.forEach(row => {
    if (row._visible !== undefined && row._visible !== true) return;
    const cellContent = row[headers[selectedColumnIndex]] || '';
    if (cellContent.includes(searchVal)) {
      row[headers[selectedColumnIndex]] = cellContent.replace(regex, replaceVal);
      count++;
    }
  });

  renderTable();
  showNotification(`–£—Å–ø–µ—à–Ω–æ –∑–∞–º–µ–Ω–µ–Ω–æ ${count} —è—á–µ–µ–∫`);
});

document.getElementById('searchCodesBtn').addEventListener('click', () => {
  const input = document.getElementById('codesSearch').value.trim();
  if (!headers.length) {
    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª.');
    return;
  }
  if (!input) {
    csvData.forEach(row => (row._visible = true));
    renderTable();
    showNotification(`–ü–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ —Å—Ç—Ä–æ–∫–∏`);
    return;
  }
  const codes = input.split(/[\s,]+/).filter(c => c);
  let count = 0;
  csvData.forEach(row => {
    const cellVal = row[headers[11]] || '';
    if (codes.some(code => cellVal.includes(code))) {
      row._visible = true;
      count++;
    } else {
      row._visible = false;
    }
  });
  renderTable();
  showNotification(`–ù–∞–π–¥–µ–Ω–æ ${count} —Å—Ç—Ä–æ–∫ –ø–æ –∫–æ–¥–∞–º`);
});

document.getElementById('insertBtn').addEventListener('click', () => {
  const content = document.getElementById('insertText').value;
  const type = document.getElementById('insertType').value;
  const position = document.getElementById('insertPosition').value;
  const isFilterActive = document.getElementById('codesSearch').value.trim() !== '';

  let count = 0;
  csvData.forEach(row => {
    if (isFilterActive && row._visible !== true) return;
    if (type === 'html' || type === 'text') {
      if (position === 'start') {
        row[headers[selectedColumnIndex]] = content + (row[headers[selectedColumnIndex]] || '');
      } else {
        row[headers[selectedColumnIndex]] = (row[headers[selectedColumnIndex]] || '') + content;
      }
      count++;
    }
  });
  renderTable();
  showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${count} —Å—Ç—Ä–æ–∫`);
});

document.getElementById('saveBtn').addEventListener('click', () => {
  if (!headers.length || !csvData.length) {
    alert('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.');
    return;
  }

  const columnIndex = selectedColumnIndex;
  const itemIdIndex = 11; // –∏–Ω–¥–µ–∫—Å –∫–æ–ª–æ–Ω–∫–∏ ItemID
  const columnHeader = headers[columnIndex];
  const itemIdHeader = headers[itemIdIndex];

  const csvRows = [];
  csvRows.push(`${itemIdHeader};${columnHeader}`);

  csvData.forEach(row => {
  if (row._visible === false) return;
  let cellItemID = row['ItemID'] || '';
  let cellSelected = row[headers[selectedColumnIndex]] || '';

  if (typeof cellItemID === 'string' && /[;"\n]/.test(cellItemID)) {
    cellItemID = `"${cellItemID.replace(/"/g, '""')}"`;
  }
  if (typeof cellSelected === 'string' && /[;"\n]/.test(cellSelected)) {
    cellSelected = `"${cellSelected.replace(/"/g, '""')}"`;
  }

  csvRows.push(`${cellItemID};${cellSelected}`);
});

  const csvString = csvRows.join('\n');

  const blob = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'new.csv';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  showNotification(`–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω`);
});

function showBugModal() {
  const bugModal = document.getElementById('bugModal');

  // 1. –£–±–∏—Ä–∞–µ–º —Å–∫—Ä—ã–≤–∞—é—â–∏–π –∫–ª–∞—Å—Å
  bugModal.classList.remove('bug-modal-hidden');

  // 2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ (–∫–ª—é—á–µ–≤–æ–π —à–∞–≥!)
  bugModal.offsetHeight; // –∏–ª–∏ bugModal.getBoundingClientRect()

  // 3. –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ (–±–µ–∑ transition)
  bugModal.classList.add('bug-modal-enter');

  // 4. –ß–µ—Ä–µ–∑ –º–∏–∫—Ä–æ–∑–∞–¥–µ—Ä–∂–∫—É –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Å transition
  requestAnimationFrame(() => {
    bugModal.classList.add('bug-modal-enter-active');
  });
}

function hideBugModal() {
  const bugModal = document.getElementById('bugModal');
  bugModal.classList.remove('bug-modal-enter-active');
  bugModal.classList.add('bug-modal-exit-active');
  setTimeout(() => {
    bugModal.classList.remove('bug-modal-exit-active');
    bugModal.classList.add('bug-modal-hidden');
  }, 300);
}

// –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –∫–Ω–æ–ø–∫–∞–º
document.getElementById('bugReportBtn').addEventListener('click', showBugModal);
document.getElementById('closeBugModal').addEventListener('click', hideBugModal);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–∞–≥–∞
const BUG_REPORT_URL = 'https://script.google.com/macros/s/AKfycbyMukNiNzcTtsmydQQJZeJJpVL3lsI17Oy8h_kDliY4WJybvSDZxM6-MS8GFzniKbuu/exec';
document.getElementById('sendBug').addEventListener('click', () => {
  const description = document.getElementById('bugDescription').value.trim();
  const spinner = document.querySelector('.spinner');
  if (description === '') {
    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É.');
    return;
  }
spinnerTimeout = setTimeout(() => {
    spinner.style.display = 'block';
  }, 300);
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å
  fetch(BUG_REPORT_URL, {
    method: 'POST',
    contentType: 'application/json',
    body: JSON.stringify({description: description})
  })
  .then(response => response.json())
  .then(data => {
    clearTimeout(spinnerTimeout);
      spinner.style.display = 'none';
    if (data.result === 'success') {
      showNotification('–ë–∞–≥ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
    } else {
      showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –±–∞–≥–∞.');
    }
  })
  .catch(() => {
    clearTimeout(spinnerTimeout);
      spinner.style.display = 'none';
    showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.');
  });

  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è
  document.getElementById('bugDescription').value = '';
  // –ü–†–ê–í–ò–õ–¨–ù–û–ï –°–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
  hideBugModal(); // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
});
const sheetUrl = 'https://docs.google.com/spreadsheets/d/11i0Nwwbw09aJQFNkztrAUfx0G8PXzUfg1sZyjeIKjxQ/gviz/tq?sheet=–õ–∏—Å—Ç1';

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å loadChangelogFromSheet
function loadChangelogFromSheet() {
  fetch(sheetUrl)
    .then(response => response.text())
    .then(text => {
      const jsonData = JSON.parse(text.substring(47).slice(0, -2));
      const rows = jsonData.table.rows;
      let entriesHtml = '';

      function formatDateToDDMMYY(dateStr) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ Date(...)
  const dateMatch = /Date\((\d+),\s*(\d+),\s*(\d+)\)/.exec(dateStr);
  if (dateMatch) {
    let year = parseInt(dateMatch[1], 10);
    let month = parseInt(dateMatch[2], 10); // –Ω—É–º–µ—Ä–∞—Ü–∏—è —Å 0
    let day = parseInt(dateMatch[3], 10);

    // –ú–µ—Å—è—Ü +1, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –º–µ—Å—è—Ü
    month += 1;

    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º
    const dd = day.toString().padStart(2, '0');
    const mm = month.toString().padStart(2, '0');
    const yy = (year % 100).toString().padStart(2, '0');

    return `${dd}.${mm}.${yy}`;
  }
  // –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é
  return dateStr;
}

      rows.forEach(row => {
        const version = row.c[0].v;
        const rawDate = row.c[1].v; // –∏—Å—Ö–æ–¥–Ω–∞—è –¥–∞—Ç–∞
        const date = formatDateToDDMMYY(rawDate); // –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –¥–¥.–º–º.–≥–≥
        console.log('–ò—Å—Ö–æ–¥–Ω–∞—è –¥–∞—Ç–∞:', rawDate, '–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è:', date); // –¥–æ–±–∞–≤—å—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        const type = row.c[2].v.trim();
        let description = row.c[3].v;

        // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è
        description = description.replace(/^‚Ä¢\s?/gm, '<li>‚Ä¢</li>');

        const descriptionHtml = description
          .split('\n')
          .map(line => line.trim().startsWith('‚Ä¢') ? `<li>${line.trim()}</li>` : `<p>${line.trim()}</p>`)
          .join('');

        entriesHtml += `
          <div class="changelog-entry">
            <div class="changelog-header">
              <div>
                <span class="changelog-version">–í–µ—Ä—Å–∏—è ${version}</span>
                <span class="changelog-date">[${date}]</span>
              </div>
              <div class="changelog-type ${type}">${type}</div>
            </div>
            <ul style="margin:0; padding-left:20px;">${descriptionHtml}</ul>
          </div>`;
      });

      const container = document.getElementById('changelogContainer');
      container.innerHTML = '<h4 style="margin-top:0;">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h4>' + entriesHtml;
    })
    .catch(() => {
      document.getElementById('changelogContainer').innerHTML = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π.';
    });
}

// –í–∞—Ä–∏–∞–Ω—Ç 1: –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ä–∞–∑—É –∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
window.addEventListener('load', () => {
  loadChangelogFromSheet();
  // —Ç–∞–∫–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑ localStorage
  const savedChangelog = localStorage.getItem('changelog') || '';
  document.getElementById('changelogText').value = savedChangelog;
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "Changelog"
const changelogBtn = document.getElementById('changelogToggle');
const changelogContainer = document.getElementById('changelogContainer');

changelogBtn.addEventListener('click', () => {
  if (changelogContainer.classList.contains('show')) {
    changelogContainer.classList.remove('show');
  } else {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏, –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º
    loadChangelogFromSheet();
    changelogContainer.classList.add('show');
  }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.addEventListener('load', () => {
  const savedChangelog = localStorage.getItem('changelog') || '';
  document.getElementById('changelogText').value = savedChangelog;
});
</script>
<!-- –°–ø–∏–Ω–Ω–µ—Ä (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
<div id="loader" class="spinner" style="display: none;">
  <div class="spinner-inner"></div>
</div>
<script>
window.addEventListener('scroll', () => {
  const toggle = document.getElementById('custom-theme-toggle');
  if (!toggle) return; // –ó–∞—â–∏—Ç–∞, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ—Ç
  const scrollY = window.scrollY || window.pageYOffset;

  const maxScroll = 300; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
  const minOpacity = 0.3; // –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
  const maxOpacity = 1;   // –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏

  let opacity = maxOpacity - (scrollY / maxScroll) * (maxOpacity - minOpacity);
  if (opacity < minOpacity) opacity = minOpacity;
  if (opacity > maxOpacity) opacity = maxOpacity;
const changelogBtn = document.getElementById('changelogToggle');
if (changelogBtn) {
  let opacity = maxOpacity - (scrollY / maxScroll) * (maxOpacity - minOpacity);
  if (opacity < minOpacity) opacity = minOpacity;
  if (opacity > maxOpacity) opacity = maxOpacity;
  changelogBtn.style.opacity = opacity;
}
  toggle.style.opacity = opacity;
});
</script>
</body>
</html>
